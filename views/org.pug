extends layout

block head
    script(type='text/javascript').
        $(document).ready(function() { //when the documents reday 
            google.charts.load("current", {packages:["calendar"]});
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                $.get( "/org/refresh/exercise", function( data ) {
                    // alert( "Load was performed." );
                    
                    var dataTable = new google.visualization.DataTable();
                    dataTable.addColumn({ type: 'date', id: 'Date' });
                    dataTable.addColumn({ type: 'number', id: 'Won/Loss' });

                    for (var i = 0; i < data.data.length; i++) {
                        var row = [
                            new Date(data.data[i][0]),
                            data.data[i][1]
                        ];
                        dataTable.addRow(row);
                    }                    

                     var chart = new google.visualization.Calendar(document.    getElementById('calendar_workout'));

                     var options = {
                          title: "Workout statistics",
                          height: 350,
                          colorAxis : {
                            minValue : -1
                          }
                     };

                     chart.draw(dataTable, options);

                });

                $.get("/org/refresh/pomodora", function(data) {
                    var dataTable = new google.visualization.DataTable();
                    dataTable.addColumn({ type: 'date', id: 'Date' });
                    dataTable.addColumn({ type: 'number', id: 'Won/Loss' });

                    for (var i = 0; i < data.data.length; i++) {
                        var tmp_date = new Date(data.data[i][0]);
                        var row = [
                            new Date(tmp_date.getUTCFullYear(), 
                                    tmp_date.getUTCMonth(),
                                    tmp_date.getUTCDate()
                                    ),
                            data.data[i][1]
                        ];
                        console.log(row);
                        dataTable.addRow(row);
                    }                    

                     var chart = new google.visualization.Calendar(document.    getElementById('calendar_pomodora'));

                     var options = {
                          title: "Pomodora statistics",
                          height: 350,
                          colorAxis : {
                            minValue : -1
                          }
                     };

                     chart.draw(dataTable, options);

                });




            }
        });

block content
    h1 welcome to org 
    div
        iframe(height="500", width="100%",srcdoc=agendaHtml) 


    hr
    h1 Graph  
    div(id="calendar_workout" style="width: 1000px; height: 350px;")
    div(id="calendar_pomodora" style="width: 1000px; height: 350px;")



